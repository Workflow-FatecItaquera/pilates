<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cadastrar aula</title>
	<link rel="stylesheet" th:href="@{/css/styles.css}">
	<link rel="icon" type="image/x-icon" th:href="@{/images/logoi.png}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />

</head>
<body>
	<th:block th:replace="fragments/header :: header"></th:block>
	 <div class="box-linear d-flex flex-column align-items-center">
	 <form id="cadastroAula" th:action="@{/create/aula}" method="post" th:object="${evento}">
		<input style="display: none;" type="date" th:field="*{data}" name="dataAula" id="data-aula">
	 	<div class="form-cadastro d-flex flex-column gap-2" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="500">
	 		<div class="d-flex flex-row justify-content-between align-items-center">
				<h4>Informações de agendamento</h4>
				<img class="icon secao" th:src="@{/images/icon-setabaixo.png}" alt="Seção">
			</div>
			<div class="d-flex flex-row justify-content-between align-items-center">
				<div class="box-input d-flex flex-column align-items-start gap-2">
					<label>Instrutor</label>
					<select required th:field="*{instrutor.id}" id="select-instrutor" name="instrutores"> <!-- Deixe o usuário por padrão, que no caso será o instrutor logado na sessão -->
						<option th:each="instrutor_s : ${instrutores}" th:value="${instrutor_s.id}" th:text="|${instrutor_s.nome} ${instrutor_s.sobrenome}|"
						th:selected="${instrutor.id != null} ? ${instrutor_s.id.equals(instrutor.id)} : false"></option>
					</select>
				</div>
				<div class="box-input d-flex flex-column align-items-start gap-2">
					<label>Sala</label>
					<select th:field="*{sala}" id="select-salas" name="instrutores" required>
						<option th:value="'idsala1'" th:text="'Térreo: Sala 01'"></option>						
						<option th:value="'idsala2'" th:text="'Pilates: Sala 02'"></option>
						<option th:value="'idsala3'" th:text="'Espaço multidisciplinar: Sala 03'"></option>
					</select>
				</div>
			</div>
			
			<div class="d-flex flex-row justify-content-between align-items-center">			
				<div class="box-input d-flex flex-column align-items-start gap-2">
					<label>Horário de início</label>
					<input th:field="*{horaInicio}" type="time" name="horarioinicio" required>
				</div>
				<div class="box-input d-flex flex-column align-items-start gap-2">
					<label>Horário de término</label>
					<input th:field="*{horaTermino}" type="time" name="horariotermino" required>
				</div>		
			</div>
				<div class="box-input d-flex flex-column align-items-start gap-2">
					<label>Tipo de Aula</label>
					<select required th:field="*{tipo}" id="tipoAula" name="tipoAula">
						<option th:value="'solo'" th:text="'Pilates Solo'"></option>
						 <option th:value="'aparelhos'" th:text="'Pilates com Aparelhos'"></option>
						 <option th:value="'dupla'" th:text="'Pilates em Dupla'"></option>
						 <option th:value="'gestantes'" th:text="'Pilates para Gestantes'"></option>
						 <option th:value="'idosos'" th:text="'Pilates para Idosos'"></option>
						 <option th:value="'avancado'" th:text="'Pilates Avançado'"></option>
						 <option th:value="'reabilitacao'" th:text="'Reabilitação com Pilates'"></option>
						 <option th:value="'funcional'" th:text="'Pilates Funcional'"></option>
						 <option th:value="'clinico'" th:text="'Pilates Clínico'"></option>
						 <option th:value="'alongamento'" th:text="'Alongamento e Mobilidade'"></option>
					</select>
				</div>
	 	</div>
	 	<br>
	 	<div class="form-cadastro d-flex flex-column gap-2" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="500">
	 		<div class="d-flex flex-row justify-content-between align-items-center">
	 			<div class="d-flex flex-column align-items-start gap-2">
				<h4>Data de agendamento</h4>
				<p>Escolha uma data válida para disponibilizar o agendamento de aula.</p>
				<p id="data-escolhida"></p>
	 			</div>
				<img class="icon secao" th:src="@{/images/icon-setabaixo.png}" alt="Seção">
			</div>
			<div id="calendario"></div>
			<hr>
			<div class="d-flex flex-col justify-content-between align-items-end">
				<p class="link-info"><a>Para mais informações, clique aqui</a></p>
				<button class="botao botao-preto" type="submit">Cadastrar</button>
			</div>
	 	</div>	 	
	 </form>
	 </div>
	 
	  <script>
	    document.addEventListener('DOMContentLoaded', function () {
	      const calendarEl = document.getElementById('calendario');
	      const calendar = new FullCalendar.Calendar(calendarEl, {
	        initialView: 'dayGridMonth',
	        right: 'dayGridMonth,timeGridWeek,timeGridDay',
	        locale: 'pt-br',
	        selectable: true,
			dateClick: function(info){
				document.querySelector('#data-aula').value = info.dateStr
				document.querySelector('#data-escolhida').textContent = `A data escolhida é ${mascaraData(info.dateStr)}`
			}
	      });
	
	      calendar.render();
	    });
	  </script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
	<script>
	  AOS.init();
	</script>
	<th:block th:replace="fragments/footer :: footer"></th:block>
	
	<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
	<script th:src="@{/js/sweetalert.js}"></script>
	<script th:src="@{/js/formHandler.js}"></script>
	<script th:src="@{/js/agendamento.js}"></script>
</body>
</html>
